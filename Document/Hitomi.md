# 히토미 데이터 동기화

`hitomi.la`의 데이터 저장방식이 바뀌어 더이상 기존의 방법으로 데이터를 동기화할 수 없습니다.

`a`부터 `zzzzz...`까지의 `sha256`을 구한 `suffix-tree`를 사용해 검색을 수행합니다.
이때 키는 해시값의 앞 네 자리입니다. `galleries.1549796337.index`와 같은 파일이 생성됩니다.
또한 자주쓰이는 태그는 캐싱된 데이터 `female_sole_female-all.nozomi`등을 이용해 검색됩니다.
기존의 검색방식과는 다르게 각 선행토큰에 대한 검색결과에 대한 검색을 수행하므로 데이터 베이스를 필요로하지 않습니다.
최신 데이터는 `https://ltn.hitomi.la/index-all.nozomi`에서 `magic`을 얻을 수 있으나, 정보는 얻을 수 없습니다.

현재 유일한 해결방법은 `galleryblock`을 이용한 완전탐색 방법인 것 같습니다.